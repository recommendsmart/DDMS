langcode: en
status: true
dependencies:
  config:
    - field.field.node.type_1.field_other_node
    - field.field.node.type_2.field_other_node
    - field.storage.node.field_other_node
  module:
    - eca_base
    - eca_content
id: process_xcnwf4e
modeller: bpmn_io
label: 'Cross references'
version: 1.0.0
weight: null
events:
  Event_011cx7s:
    plugin: 'content_entity:insert'
    label: 'Insert node'
    fields:
      -
        key: type
        value: 'node _all'
    successors:
      -
        id: Activity_1rlgsjy
        condition: ''
  Event_1cfd8ek:
    plugin: 'content_entity:update'
    label: 'Update node'
    fields:
      -
        key: type
        value: 'node _all'
    successors:
      -
        id: Activity_1rlgsjy
        condition: ''
      -
        id: Activity_1cxcwjm
        condition: ''
conditions:
  Flow_0iztkfs:
    plugin: eca_entity_type_bundle
    fields:
      -
        key: type
        value: 'node type_1'
      -
        key: negate
        value: 'no'
      -
        key: entity
        value: ''
  Flow_1jqykgu:
    plugin: eca_entity_type_bundle
    fields:
      -
        key: type
        value: 'node type_2'
      -
        key: negate
        value: 'no'
      -
        key: entity
        value: ''
  Flow_0i81v8o:
    plugin: eca_entity_field_value
    fields:
      -
        key: field_name
        value: field_other_node
      -
        key: expected_value
        value: '[entity:nid]'
      -
        key: operator
        value: equal
      -
        key: type
        value: value
      -
        key: case
        value: 'no'
      -
        key: negate
        value: 'yes'
      -
        key: entity
        value: refentity
  Flow_1tgic5x:
    plugin: eca_entity_field_value_empty
    fields:
      -
        key: field_name
        value: field_other_node
      -
        key: negate
        value: 'yes'
      -
        key: entity
        value: ''
gateways:
  '':
    type: 4
    successors: {  }
  Gateway_1xl2rvc:
    type: 0
    successors:
      -
        id: Activity_0k6im8f
        condition: ''
      -
        id: Activity_1oj601y
        condition: ''
actions:
  Activity_1rlgsjy:
    plugin: eca_void_and_condition
    label: void
    fields: {  }
    successors:
      -
        id: Activity_0r1gs9s
        condition: Flow_0iztkfs
      -
        id: Activity_0r1gs9s
        condition: Flow_1jqykgu
  Activity_0h8b7vh:
    plugin: eca_token_load_entity_ref
    label: 'Load referenced node'
    fields:
      -
        key: field_name_entity_ref
        value: field_other_node
      -
        key: token_name
        value: refentity
      -
        key: from
        value: current
      -
        key: entity_type
        value: _none
      -
        key: entity_id
        value: ''
      -
        key: revision_id
        value: ''
      -
        key: langcode
        value: _interface
      -
        key: latest_revision
        value: 'no'
      -
        key: object
        value: ''
    successors:
      -
        id: Gateway_1xl2rvc
        condition: Flow_0i81v8o
  Activity_0k6im8f:
    plugin: eca_set_field_value
    label: 'Set Cross Ref'
    fields:
      -
        key: field_name
        value: field_other_node
      -
        key: field_value
        value: '[entity:nid]'
      -
        key: save_entity
        value: 'yes'
      -
        key: strip_tags
        value: 'no'
      -
        key: trim
        value: 'no'
      -
        key: object
        value: refentity
    successors: {  }
  Activity_0r1gs9s:
    plugin: eca_void_and_condition
    label: void
    fields: {  }
    successors:
      -
        id: Activity_0h8b7vh
        condition: Flow_1tgic5x
  Activity_1oj601y:
    plugin: action_message_action
    label: Msg
    fields:
      -
        key: message
        value: 'Node [entity:title] references [refentity:title]'
    successors: {  }
  Activity_1cxcwjm:
    plugin: action_message_action
    label: Msg
    fields:
      -
        key: message
        value: 'Node [entity:title] got updated'
    successors: {  }
